<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ESP32 Dashboard</title>
<link rel="stylesheet" href="/static/style.css">
</head>
<body class="{{ theme }}">
<div class="app">
  <div class="sidebar">
    <div class="logo">ESP</div>
    <button id="btn-led1" class="icon-btn active" title="LED1" onclick="showPage('led1')">๐ก</button>
    <button id="btn-led2" class="icon-btn" title="LED2" onclick="showPage('led2')">๐</button>
    <button id="btn-wifi" class="icon-btn" title="WiFi" onclick="showPage('wifi')">๐ถ</button>
    <button id="btn-effects" class="icon-btn" title="Effects" onclick="showPage('effects')">โจ</button>
    <button id="btn-settings" class="icon-btn" title="Settings" onclick="showPage('settings')">โ๏ธ</button>
  </div>

  <div class="main">
    <div class="header">
      <div class="app-title" id="appTitle">Bแบฃng ฤiแปu Khiแปn ESP32</div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="btnRefresh" class="btn secondary">Lแบฅy trแบกng thรกi</button>
        <button id="btnTheme" class="btn secondary">Giao diแปn</button>
        <button id="btnLang" class="btn secondary">Ngรดn ngแปฏ</button>
      </div>
    </div>

    <div class="card page" id="page-led1" style="display:block">
      <div class="title" id="title-led1">ฤรจn LED 1</div>
      <button id="toggle1" class="btn">Bแบญt / Tแบฏt</button>
      <div style="margin-top:12px;">ฤแป sรกng hiแปn tแบกi: <b id="val1">{{ pwm1 }}</b>%</div>
      <div style="margin-top:12px">
        <input id="slider1" class="slider" type="range" min="0" max="100" value="{{ pwm1 }}">
      </div>
    </div>

    <div class="card page" id="page-led2" style="display:none">
      <div class="title" id="title-led2">ฤรจn LED 2</div>
      <button id="toggle2" class="btn">Bแบญt / Tแบฏt</button>
      <div style="margin-top:12px;">ฤแป sรกng hiแปn tแบกi: <b id="val2">{{ pwm2 }}</b>%</div>
      <div style="margin-top:12px">
        <input id="slider2" class="slider" type="range" min="0" max="100" value="{{ pwm2 }}">
      </div>
    </div>

    <div class="card page" id="page-effects" style="display:none">
      <div class="title">Hiแปu แปฉng LED</div>
      <div id="effectBox">
        <div class="tag" data-effect="none" onclick="chooseEffect('none')">Tแบฏt</div>
        <div class="tag" data-effect="sos" onclick="chooseEffect('sos')">SOS</div>
        <div class="tag" data-effect="blink_fast" onclick="chooseEffect('blink_fast')">Nhรกy nhanh</div>
        <div class="tag" data-effect="blink_slow" onclick="chooseEffect('blink_slow')">Nhรกy chแบญm</div>
        <div class="tag" data-effect="fade" onclick="chooseEffect('fade')">Fade</div>
        <div class="tag" data-effect="breathing" onclick="chooseEffect('breathing')">Breathing</div>
      </div>
      <div class="title" style="margin-top:16px">Mแปฅc tiรชu (Target)</div>
      <div class="checkbox-group">
        <label><input type="checkbox" id="eff-target-1" value="led1" checked> LED 1</label>
        <label><input type="checkbox" id="eff-target-2" value="led2" checked> LED 2</label>
      </div>
      <div style="margin-top:12px">Tแปc ฤแป: <input id="effectSpeed" type="range" min="1" max="10" value="5" class="slider"></div>
      <div style="margin-top:12px">
        <button class="btn" onclick="applyEffect()">รp dแปฅng</button>
        <button class="btn secondary" onclick="stopEffect()">Tแบฏt</button>
      </div>
    </div>

    <div class="card page" id="page-wifi" style="display:none">
      <div class="title">WiFi ฤรฃ lฦฐu</div>
      <div id="wifiList">ฤang tแบฃi...</div>
      <div style="margin-top:12px">
        <input id="newSsid" placeholder="SSID" style="padding:8px;border-radius:8px;width:46%">
        <input id="newPass" placeholder="Pass" style="padding:8px;border-radius:8px;width:46%">
        <button class="btn" onclick="addWifi()">Lฦฐu</button>
      </div>
    </div>

    <div class="card page" id="page-settings" style="display:none">
      <div class="title">Cรi ฤแบทt</div>
      <div class="kv">Ngรดn ngแปฏ: <span id="langLabel">Tiแบฟng Viแปt</span></div>
      <div style="height:8px"></div>
      <div class="kv">Theme: <span id="themeLabel">{{ theme }}</span></div>
      <div style="margin-top:20px; display:flex; gap:10px;">
        <button id="btnThemeMobile" class="btn secondary">Giao diแปn</button>
        <button id="btnLangMobile" class="btn secondary">Ngรดn ngแปฏ</button>
      </div>
      <div style="margin-top:12px">
        <button class="btn secondary" onclick="refreshStatus()">Lแบฅy trแบกng thรกi</button>
      </div>
    </div>
  </div>

  <div class="log-panel" id="logPanel">
    <div class="log-title">Realtime Log</div>
    <div id="log" class="log-box"></div>
  </div>
</div>

<div class="bottom-nav" id="bottomNav" style="display:none">
  <button id="m-led1" onclick="showPage('led1')">๐ก</button>
  <button id="m-led2" onclick="showPage('led2')">๐</button>
  <button id="m-wifi" onclick="showPage('wifi')">๐ถ</button>
  <button id="m-effects" onclick="showPage('effects')">โจ</button>
  <button id="m-settings" onclick="showPage('settings')">โ๏ธ</button>
</div>

<script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
<script src="/static/app.js"></script>

</body>
</html>
